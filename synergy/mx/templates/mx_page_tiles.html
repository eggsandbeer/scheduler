{% extends 'main_header.html' %}
{% block body %}

    {% set test_mx_trees = {
        'TreeSite': {
            'tree_name': 'TreeSite',
            'sorted_process_names': ['SiteYearlyAggregator', 'SiteMonthlyAggregator', 'SiteDailyAggregator', 'SiteHourlyAggregator'],
            'processes': {
                'SiteYearlyAggregator': {
                    'process_name': 'SiteYearlyAggregator',
                    'time_qualifier': '_yearly',
                    'state_machine_name': 'discrete',
                    'process_type': 'type_managed',
                    'run_on_active_timeperiod': False,
                    'reprocessing_queue': [],
                    'next_timeperiod': '2015000000',
                    'trigger_frequency': 'every 14000',
                    'state': 'state_on',
                    'blocking_type': 'blocking_normal'
                },
                'SiteMonthlyAggregator': {
                    'process_name': 'SiteMonthlyAggregator',
                    'time_qualifier': '_monthly',
                    'state_machine_name': 'discrete',
                    'process_type': 'type_managed',
                    'run_on_active_timeperiod': False,
                    'reprocessing_queue': [],
                    'next_timeperiod': '2015030000',
                    'trigger_frequency': 'every 7000',
                    'state': 'state_on',
                    'blocking_type': 'blocking_normal'
                },
                'SiteDailyAggregator': {
                    'process_name': 'SiteDailyAggregator',
                    'time_qualifier': '_daily',
                    'state_machine_name': 'discrete',
                    'process_type': 'type_managed',
                    'run_on_active_timeperiod': False,
                    'reprocessing_queue': [],
                    'next_timeperiod': '2015030100',
                    'trigger_frequency': 'every 3600',
                    'state': 'state_on',
                    'blocking_type': 'blocking_normal'
                },
                'SiteHourlyAggregator': {
                    'process_name': 'SiteHourlyAggregator',
                    'time_qualifier': '_hourly',
                    'state_machine_name': 'discrete',
                    'process_type': 'type_managed',
                    'run_on_active_timeperiod': False,
                    'reprocessing_queue': [],
                    'next_timeperiod': '2015030101',
                    'trigger_frequency': 'every 600',
                    'state': 'state_on',
                    'blocking_type': 'blocking_normal'
                }
            }
        },
        'TreeAlert': {
            'tree_name': 'TreeAlert',
            'sorted_process_names': ['AlertDailyWorker'],
            'processes': {
                'AlertDailyWorker': {
                    'process_name': 'AlertDailyWorker',
                    'time_qualifier': '_daily',
                    'state_machine_name': 'discrete',
                    'process_type': 'type_managed',
                    'run_on_active_timeperiod': False,
                    'reprocessing_queue': [],
                    'next_timeperiod': '2015030100',
                    'trigger_frequency': 'every 3600',
                    'state': 'state_on',
                    'blocking_type': 'blocking_normal'
                }
            }
        }
    } %}


    {%- for tree_name, tree_obj in details.items() %}
        <div class="grid-container">
            <div id="grid-header-{{ tree_name }}" class="grid-header"></div>
            {% for process_name in tree_obj.sorted_process_names %}
            <div id="grid-header-{{ process_name }}" class="grid-header"></div>
            {%- endfor %}
        </div>
        <div class="grid-container">
            <div id="grid-info-{{ tree_name }}" class="grid-info"></div>
            {% for process_name in tree_obj.sorted_process_names %}
            <div id="grid-info-{{ process_name }}" class="grid-info context-menu"></div>
            {%- endfor %}
        </div>
    {% endfor -%}

{% import 'block_context_menu.html' as context_menu %}
{{ context_menu.job_menu() }}

{% endblock %}
